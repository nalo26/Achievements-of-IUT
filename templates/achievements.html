<head>
    <title>[IUT RPG] {{ achievements[category].name }}</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/navbar.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/sidebar.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/tree.css') }}">
</head>

<body>
    <div class="sidebar">
        {% for a in achievements %}
            <li><a title="{{ a.lore }}" href="/achievements/{{ loop.index-1 }}">{{ a.name }}</a></li>
        {% endfor %}
    </div>
    
    {% include "navbar.html" %}

    <div class="tree-div">

    </div>
    <script>
        var tree_div = document.querySelector(".tree-div");
        var tree = document.createElement("ul");
        tree.className = "tree";
        tree_div.appendChild(tree);
        var achievements = {{ achievements[category].childs | safe }};
        tree_builder(achievements, tree);

        function tree_builder(achievements, parent_node) {
            for(let i in achievements) {
                let a = achievements[i];

                let li = document.createElement("li");

                let span = document.createElement("span");
                let color = getComputedStyle(document.documentElement).getPropertyValue("--difficulty-" + a.difficulty);
                span.style.borderColor = color;
                span.innerHTML = a.name;
                
                li.appendChild(span);
                parent_node.appendChild(li);

                if(typeof a.childs !== 'undefined') {
                    let ul = document.createElement("ul");
                    li.appendChild(ul);
                    tree_builder(a.childs, ul);
                }
            }
        }
    </script>
</body>